/// <reference types="node" />
import * as express from 'express';
import * as http from 'http';
/**
 * The Cloud Functions context object for the event.
 *
 * @link https://cloud.google.com/functions/docs/writing/background#function_parameters
 */
export interface CloudFunctionsContext {
    /**
     * A unique ID for the event. For example: "70172329041928".
     */
    eventId?: string;
    /**
     * The date/time this event was created. For example: "2018-04-09T07:56:12.975Z"
     * This will be formatted as ISO 8601.
     */
    timestamp?: string;
    /**
     * The type of the event. For example: "google.pubsub.topic.publish".
     */
    eventType?: string;
    /**
     * The resource that emitted the event.
     */
    resource?: string;
}
/**
 * The CloudEvents v0.2 context object for the event.
 *
 * @link https://github.com/cloudevents/spec/blob/v0.2/spec.md#context-attributes
 */
export interface CloudEventsContext {
    /**
     * Type of occurrence which has happened.
     */
    type?: string;
    /**
     * The version of the CloudEvents specification which the event uses.
     */
    specversion?: string;
    /**
     * The event producer.
     */
    source?: string;
    /**
     * ID of the event.
     */
    id?: string;
    /**
     * Timestamp of when the event happened.
     */
    time?: string;
    /**
     * A link to the schema that the event data adheres to.
     */
    schemaurl?: string;
    /**
     * Content type of the event data.
     */
    contenttype?: string;
    [key: string]: any;
}
export declare type Context = CloudFunctionsContext | CloudEventsContext;
export interface HttpFunction {
    (req: express.Request, res: express.Response): any;
}
export interface EventFunctionWithCallback {
    (data: {}, context: Context, callback: Function): any;
}
export interface EventFunction {
    (data: {}, context: Context): any;
}
export declare type HandlerFunction = HttpFunction | EventFunction | EventFunctionWithCallback;
declare global {
    namespace Express {
        interface Request {
            rawBody?: Buffer;
        }
    }
}
export declare enum SignatureType {
    HTTP = 0,
    EVENT = 1
}
/**
 * Returns user's function from function file.
 * Returns null if function can't be retrieved.
 * @return User's function or null.
 */
export declare function getUserFunction(codeLocation: string, functionTarget: string): HandlerFunction | null;
/**
 * Enables registration of error handlers.
 * @param server HTTP server which invokes user's function.
 * @constructor
 */
export declare class ErrorHandler {
    private readonly server;
    constructor(server: http.Server);
    /**
     * Registers handlers for uncaught exceptions and other unhandled errors.
     */
    register(): void;
}
/**
 * Creates and configures an Express application and returns an HTTP server
 * which will run it.
 * @param userFunction User's function.
 * @param functionSignatureType Type of user's function signature.
 * @return HTTP server.
 */
export declare function getServer(userFunction: HandlerFunction, functionSignatureType: SignatureType): http.Server;
